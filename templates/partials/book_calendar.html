{% extends "base.html" %}
{% block title %}Reservation Calendar{% endblock title %}

{% block body %}
<div class="container mt-5">
  <h2>Select a Reservation Date</h2>
  <div class="row">
    <div class="col-md-6">
      
      <div class="input-group date" id="reservationDatepicker">
        <input type="text" class="form-control" placeholder="YYYY-MM-DD" readonly>
        <span class="input-group-append">
          <span class="input-group-text">
            <i class="fa fa-calendar"></i>
          </span>
        </span>
      </div>
      
      <div class="mt-3" id="selectedDateDisplay"></div>
    </div>
  </div>
</div>
{% endblock body %}

{% block scripts %}
  <!-- Include jQuery (required for Bootstrap and Bootstrap Datepicker) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Include Bootstrap CSS and JS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <!-- Include FontAwesome for the calendar icon (optional) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <!-- Include Bootstrap Datepicker CSS and JS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

  <script>
    $(document).ready(function(){
      // Assume reservedDates is an array fetched from your backend
      // For demonstration, these dates will be disabled in the calendar.
      var reservedDates = ["2025-04-01", "2025-04-02", "2025-04-05"];

      // Initialize the datepicker
      $('#reservationDatepicker').datepicker({
        format: 'dd-mm-yyyy',
        todayHighlight: true,
        autoclose: true,
        datesDisabled: reservedDates
      }).on('changeDate', function(e) {
        // Display the selected date
        $('#selectedDateDisplay').html('<strong>Selected date:</strong> ' + e.format());
        // Here you can also add logic to save the reservation via AJAX.
      });
    });
  </script>
{% endblock scripts %}
